<!DOCTYPE html>
<html>
	<head>
		<title>Horrible Cop</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="./assets/css/main.css">
        <link rel="stylesheet" href="./assets/css/dataTables.bootstrap.css">


        <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="./assets/js/jquery.dataTables.min.js"></script>
        <script src="./assets/js/dataTables.bootstrap.js"></script>
        <script src="./assets/js/jquery.csv.min.js"></script>

        <script type="text/javascript"charset="utf-8">
            $( document ).ready(function() {
                var el = "materials";
                $("#" + el).html("<table class='table table-striped table-condensed table-bordered' id='" + el + "-table'></table>");

                $.when($.get('data/materials.csv')).then(function(data){
                    var csv_data = $.csv.toArrays(data, {});
                    var custom_formatting = [];
                    var table_head = "<thead><tr>";

                    for (head_id = 0; head_id < csv_data[0].length; head_id++) {
                        table_head += "<th>" + csv_data[0][head_id] + "</th>";
                    }

                    table_head += "</tr></thead>";

                    $('#' + el + '-table').append(table_head);
                    $('#' + el + '-table').append("<tbody></tbody>");

                    for (row_id = 1; row_id < csv_data.length; row_id++) {
                        var row_html = "<tr>";

                        //takes in an array of column index and function pairs
                        if (custom_formatting != []) {
                            $.each(custom_formatting, function(i, v){
                                var col_idx = v[0]
                                var func = v[1];
                                csv_data[row_id][col_idx]= func(csv_data[row_id][col_idx]);
                            })
                        }

                        for (col_id = 0; col_id < csv_data[row_id].length; col_id++) {
                            row_html += "<td>" + csv_data[row_id][col_id] + "</td>";
                        }

                        row_html += "</tr>";
                        $('#' + el + '-table tbody').append(row_html);
                    }

                    $('#' + el + '-table').DataTable({ "paging": false });
                });

                $('#search').keyup(function() {
                    $('#' + el + '-table').DataTable().search($(this).val()).draw();
                })
            });
		</script>
	</head>
	<body>
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Zelda: Breath of the Wild Materials/Recipes</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="index.html">Materials</a></li>
                        <li><a href="https://github.com/caravot/caravot.github.io/issues">Issues</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container-fluid">
            <h1 class="page-header">Material List</h1>
        </div>
        <div class="container-fluid">
            <form class="form-inline">
                <div class="form-group">
                    <label for="search">Search</label>
                    <input type="text" class="form-control" id="search" name="search" placeholder="Search Term" autofocus>
                </div>
            </form>
        </div>
        <div class="container-fluid">
            <div id="materials"></div>
		</div>
	</body>
</html>
